<!doctype html>

<html>
  <head>
    <title>glg-current-user</title>
    <link rel="import" href="node_modules/polymer/polymer.html">
    <link rel="import" href="src/glg-current-user.html">
    <link rel="import" href="src/glg-avatar.html">
    <style>
      body {
        font-family: "Helvetica Neue", "Helvetica", Arial;
      }

      small {
        font-size: 50%;
      }

      h3 {
        margin-bottom: 0;
      }
    </style>
  </head>

  <body unresolved>
    <div id="holder">

      <glg-current-user username="mhuggins">
        <template>
          <span>Welcome <b>{{firstName}}</b> from {{city}}!</span>
        </template>
      </glg-current-user>

      <h3>Avatars!</h3>
      <glg-avatar username="mhuggins"></glg-avatar>
      <glg-avatar username="wballard"></glg-avatar>
      <glg-avatar username="mhuggins"></glg-avatar>

      <h3><code>currentuser</code> property</h3>
      <small>This demo probably won't work on localhost since it's looking
        for cookies to determine who you are!</small>
      <glg-current-user id="drhayesElem"></glg-current-user>
      <pre id="drhayesResults"></pre>

      <h3><code>user</code> event - mhuggins</h3>
      <glg-current-user id="currentElem" username="mhuggins"></glg-current-user>
      <pre id="currentResults"></pre>

    </div>

    <script>
      document.addEventListener('polymer-ready', function() {
        // Read the currentuser property when ready.
        var drhayesElem = document.getElementById('drhayesElem');
        var drhayesResults = document.getElementById('drhayesResults');
        Object.observe(drhayesElem, function(changes) {
          changes.forEach(function(c) {
            if (c.name === 'currentuser') {
              drhayesResults.innerHTML = JSON.stringify(drhayesElem.currentuser, null, 2);
            }
          });
        });

        // Subscribe to 'user' event.
        var currentElem = document.getElementById('currentElem');
        currentElem.addEventListener('user', function(e) {
          console.log(e);
          var currentResults = document.getElementById('currentResults');
          currentResults.innerHTML = JSON.stringify(e.detail, null, 2);
        });
      });
    </script>
  </body>
</html>
